# Linux Fundamentals

## Kernel

* The kernel of the operating system is like an air traffic controller at an airport, and the applications are the airplanes under its control.

* The kernel decides which program gets which blocks of memory, it starts and kills applications, and it handles displaying text or graphics on a monitor.

## Debian Package Management

Use software packages distributed as files ending in `.deb`
`dpkg` - lowest-level tool for managing .deb files

`apt-get` - Advanced Package Tool (front end program to `dpkg` tool)


## RPM Package Management

According to the Linux Standards Base, the standard package management system is RPM (recursive acronym, the RPM Package Manager).

Uses .rpm files for each software package. The RPM Package Management systems track dependencies between packages. Tracking dependencies ensures that when a package is installed, the system also installs any packages needed by that package to function correctly. Dependencies also ensure that software updates and removals are performed properly.

`rpm` - lowest-level tool for RPM Package Management
`yum` or `up2date` - front-end tools that automate the process of resolving dependency issues.

## The Filesystem Hierarchy Standard

* **`/bin/`**: basic programs.
* **`/boot/`**: Kali Linux kernel and other files required for its early boot process.
* **`/dev/`**: device files.
* **`/etc/`**: configuration files.
* **`/home/`**: user's personal files.
* **`/lib/`**: basic libraries.
* **`/media/`**: mount points for removable devices (CD/DVD-ROM, USB keys, and so on).
* **`/mnt/`**: temporary mount point.
* **`/opt/`**: extra applications provided by third parties.
* **`/root/`**: administrator's (root's) personal files.
* **`/run/`**: volatile runtime data that does not persist across reboots (not yet included in the FHS).
* **`/sbin/`**: system programs.
* **`/srv/`**: data used by servers hosted on this system.
* **`/tmp/`**: temporary files (this directory is often emptied at boot).
* **`/usr/`**: applications (this directory is further subdivided into bin, sbin, lib according to the same logic as in the root directory) Furthermore, /usr/share/ contains architecture-independent data. The /usr/local/ directory is meant to be used by the administrator for installing applications manually without overwriting files handled by the packaging system (dpkg).
* **`/var/`**: variable data handled by services. This includes log files, queues, spools, and caches.
* **`/proc/`** and **`/sys/`** are specific to the Linux kernel (and not part of the FHS). They are used by the kernel for exporting data to user space.

* `chown user file`
* `chown user:group file`
* `chgrp group file`
* `chmod rights(u/g/o/+/-/=) file`
* `-R` to operate recursively in sub-directories.

## "setuid" and "setgid" bit

allow users to run an executable with the file system permissions of the executable's owner or group respectively and to change behaviour in directories.
Because the setuid bit is set, when we run the passwd command it is automatically executed as the owner of the file.

Set the setuid bit: chmod u+s
OR with octal representation, add "4" in front of standard octal permissions.


The setgid bit is also an "s", but in the execute position for the group that owns the file. 

Set the setgid bit: `chmod g+s`
OR with octal representation, add "2" in front of the standard octal permissions.

List all files with setuid / setgid bit set

`sudo find / -perm /6000 -type f`

## "sticky" bit
the sticky bit restricts who can delete files in a directory on Linux systems. Specifically, when the sticky bit is set, only the user that owns, the user that owns the directory, or the root user can delete files within the directory. 

Set the sticky bit: `chmod +t`
OR with octal representation, add "1" in front of the standard octal permissions.

List all files with the sticky bit set

`$ sudo find / -perm /1000`

## umask command

Determines the settings of a mask that controls how file permissions are set for newly created files.

* “mask” does not mean “subtract”, in the arithmetic sense – there is no borrow or carry involved.

* a “mask” should be understood bitwise instead: applying logical operations on each bit column independently. That is, the 4th bit of the permission bit-sequence interacts with only the 4th bit of the mask.

* the mask turns off permission bits. If they are already off, the umask makes no change to the permission,

* Most applications would not create files with execute permissions set, so they would have a default of 666, which is then modified by the umask.

For example, assume that you have to unmask 077 from the system defaults for files which is 666 and directories which is 777.

The command you will use is


```
umask 077
(unmask value in binary, 000 111 111)
```

What this unmask will do is it will turn off any of the first six LSBs (least significant bits) if they are 1 and will make no change if any of them are already off.

Here is how the final permission is calculated:

```
file permission   666 = 110 110 110 
unmask value      077 = 000 111 111
will result in    600 = 110 000 000
```
Observe how both 110 values have changed to 000.

Similarly,

```
directory permission   777 = 111 111 111 
unmask value           077 = 000 111 111
will result in         700 = 111 000 000
```

## System Information and Logs

* `free`: displays information on memory
* `df`: _disk free_ reports available disk space on each of the disks mounted in the file system.
  * -h: human readale units (mebibytes (MiB, 2^20) or gibibytes (GiB, 2^30))
    * MiB (1024^2) ≈ MB (1000^2)